# Бот не отвечает — проверка по шагам

## 1. Процесс запущен?

```bash
pgrep -af bot.php
```

Должна быть строка с `php bot.php`. Если пусто — бот не запущен, запусти:

```bash
cd ~/bot.snovidec.ru/public_html/tgbot98
nohup php bot.php >> data/bot.log 2>&1 &
```

---

## 2. Лог — есть ли ошибки?

```bash
tail -50 ~/bot.snovidec.ru/public_html/tgbot98/data/bot.log
```

Ищи строки с `error`, `Error`, `ОШИБКА` или `getUpdates error`. Пришли вывод.

---

## 3. Запуск вручную (увидеть вывод в реальном времени)

Останови фоновый бот и запусти в терминале:

```bash
pkill -f "php bot.php"
cd ~/bot.snovidec.ru/public_html/tgbot98
php bot.php
```

Должно появиться: `Бот запущен. Ожидание сообщений...`

Не закрывая терминал, напиши боту в Telegram **в личку** команду `/son` (со слэшем).

- В терминале должна появиться строка `[OK] Команда /son от user_id=...`
- В Telegram — ответ «Опиши сон в следующем сообщении.»

Если в терминале ничего не появляется — бот не получает обновления (токен, сеть или хостинг режет запросы).

---

## 4. Пишешь в группу или в личку?

Сначала проверь **в личку** (открой бота в Telegram и напиши ему `/son`). В группе бот тоже должен отвечать, но в личке проще отладить.

---

## 5. Точная команда

Бот реагирует только на **/son** (со слэшем в начале). Варианты «son» или «/ son» не подходят.

---

## 6. Токен в config.php

Проверь, что в `config.php` указан правильный BOT_TOKEN от @BotFather (без пробелов, целиком). Файл не в репозитории — он только на сервере.

```bash
grep BOT_TOKEN ~/bot.snovidec.ru/public_html/tgbot98/config.php
```

(Пароль не показывай никому — просто убедись, что строка не пустая и токен похож на настоящий.)

---

## 7. Хостинг Beget

На shared-хостинге длинные процессы иногда убивают или блокируют исходящие запросы. Если при запуске `php bot.php` в терминале обновления не приходят — возможно, хостинг блокирует. Тогда бота нужно запускать на VPS или сервере, где разрешён долгий PHP и исходящий HTTPS.
